@model Arcade.ViewModels.AdminDashboardViewModel
@{
    ViewData["Title"] = "Dashboard";
    Layout = "_AdminLayout";
    var pendingOrdersPercent = Model.TotalOrders > 0 ? (Model.PendingOrders * 100.0 / Model.TotalOrders) : 0;
    var processingOrdersPercent = Model.TotalOrders > 0 ? (Model.ProcessingOrders * 100.0 / Model.TotalOrders) : 0;
    var shippedOrdersPercent = Model.TotalOrders > 0 ? (Model.ShippedOrders * 100.0 / Model.TotalOrders) : 0;
    var deliveredOrdersPercent = Model.TotalOrders > 0 ? (Model.DeliveredOrders * 100.0 / Model.TotalOrders) : 0;
}

<style>
    /* Dashboard CSS Variable Definitions - Ensuring proper dark/light mode support */
    :root {
        --arcade-bg-card: #1e2340;
        --arcade-secondary: #8b5cf6;
        --arcade-info: #3b82f6;
        --dashboard-text: #f1f5f9;
        --dashboard-text-muted: #94a3b8;
        --dashboard-bg: #0c0f1a;
    }
    
    [data-theme="light"] {
        --arcade-bg-card: #ffffff;
        --arcade-secondary: #7c3aed;
        --arcade-info: #2563eb;
        --dashboard-text: #1e293b;
        --dashboard-text-muted: #64748b;
        --dashboard-bg: #f8fafc;
    }
    
    /* ===== LIGHT MODE OVERRIDES FOR DASHBOARD ===== */
    [data-theme="light"] .dashboard-welcome {
        background: linear-gradient(135deg, rgba(124, 58, 237, 0.08) 0%, rgba(6, 182, 212, 0.08) 100%);
        border-color: #e2e8f0;
    }
    
    [data-theme="light"] .welcome-text h2 {
        color: #1e293b;
    }
    
    [data-theme="light"] .welcome-date {
        background: #ffffff;
        border-color: #e2e8f0;
        color: #1e293b;
    }
    
    [data-theme="light"] .stat-card {
        background: #ffffff;
        border-color: #e2e8f0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }
    
    [data-theme="light"] .stat-card:hover {
        box-shadow: 0 10px 30px rgba(124, 58, 237, 0.15);
    }
    
    [data-theme="light"] .stat-info small,
    [data-theme="light"] .stat-label {
        color: #64748b;
    }
    
    [data-theme="light"] .stat-footer {
        border-color: #e2e8f0;
        color: #64748b;
    }
    
    [data-theme="light"] .quick-actions-card {
        background: #ffffff;
        border-color: #e2e8f0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }
    
    [data-theme="light"] .quick-actions-title {
        color: #1e293b;
    }
    
    [data-theme="light"] .quick-action-btn {
        background: #f8fafc;
        border-color: #e2e8f0;
        color: #1e293b;
    }
    
    [data-theme="light"] .quick-action-btn:hover {
        background: rgba(124, 58, 237, 0.05);
        border-color: #7c3aed;
        color: #7c3aed;
    }
    
    [data-theme="light"] .orders-card {
        background: #ffffff;
        border-color: #e2e8f0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }
    
    [data-theme="light"] .orders-header {
        background: linear-gradient(135deg, rgba(124, 58, 237, 0.04) 0%, rgba(6, 182, 212, 0.04) 100%);
        border-color: #e2e8f0;
    }
    
    [data-theme="light"] .orders-title {
        color: #1e293b;
    }
    
    [data-theme="light"] .orders-table th {
        background: #f8fafc;
        color: #64748b;
        border-color: #e2e8f0;
    }
    
    [data-theme="light"] .orders-table td {
        border-color: #e2e8f0;
        color: #1e293b;
    }
    
    [data-theme="light"] .orders-table tr:hover td {
        background: linear-gradient(90deg, rgba(124, 58, 237, 0.04), rgba(6, 182, 212, 0.04));
    }
    
    [data-theme="light"] .customer-avatar {
        color: #ffffff;
    }
    
    [data-theme="light"] .amount {
        color: #1e293b;
    }
    
    [data-theme="light"] .action-btn {
        background: #ffffff;
        border-color: #e2e8f0;
        color: #64748b;
    }
    
    [data-theme="light"] .action-btn:hover {
        border-color: #7c3aed;
        color: #7c3aed;
    }
    
    [data-theme="light"] .status-chart-card {
        background: #ffffff;
        border-color: #e2e8f0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }
    
    [data-theme="light"] .status-chart-title {
        color: #1e293b;
    }
    
    [data-theme="light"] .donut-center-value {
        color: #1e293b;
    }
    
    [data-theme="light"] .donut-center-label {
        color: #64748b;
    }
    
    [data-theme="light"] .status-legend-item {
        color: #1e293b;
    }
    
    [data-theme="light"] .status-legend-count {
        color: #1e293b;
    }
    
    [data-theme="light"] .low-stock-card {
        background: #ffffff;
        border-color: #e2e8f0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }
    
    [data-theme="light"] .low-stock-header {
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.08) 0%, rgba(255, 107, 53, 0.08) 100%);
        border-color: #e2e8f0;
    }
    
    [data-theme="light"] .low-stock-title {
        color: #1e293b;
    }
    
    [data-theme="light"] .low-stock-name {
        color: #1e293b;
    }
    
    [data-theme="light"] .low-stock-item {
        border-color: #e2e8f0;
    }
    
    [data-theme="light"] .low-stock-footer {
        border-color: #e2e8f0;
    }
    
    [data-theme="light"] .stock-progress {
        background: #e2e8f0;
    }
    
    [data-theme="light"] .activity-card {
        background: #ffffff;
        border-color: #e2e8f0;
    }
    
    [data-theme="light"] .activity-title {
        color: #1e293b;
    }
    
    [data-theme="light"] .activity-item::before {
        background: #e2e8f0;
    }
    
    [data-theme="light"] .activity-icon {
        background: #ffffff;
        border-color: #e2e8f0;
    }
    
    [data-theme="light"] .activity-text {
        color: #1e293b;
    }
    
    [data-theme="light"] .activity-time {
        color: #64748b;
    }
    
    /* ===== END LIGHT MODE OVERRIDES ===== */
    
    /* Enhanced Dashboard Styles */
    .dashboard-welcome {
        background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(139, 0, 255, 0.1) 100%);
        border: 1px solid var(--arcade-border);
        border-radius: 16px;
        padding: 1.5rem 2rem;
        margin-bottom: 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }
    
    .welcome-text h2 {
        font-size: 1.5rem;
        margin: 0 0 0.25rem;
        color: var(--arcade-text, #f1f5f9);
    }
    
    .welcome-text p {
        color: var(--arcade-text-muted);
        margin: 0;
    }
    
    .welcome-date {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        background: var(--arcade-bg);
        padding: 0.75rem 1.25rem;
        border-radius: 12px;
        border: 1px solid var(--arcade-border);
        color: var(--arcade-text, #f1f5f9);
    }
    
    .welcome-date i {
        color: var(--arcade-primary);
    }
    
    /* Enhanced Stat Cards with Animations */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }
    
    .stat-card {
        background: var(--arcade-bg);
        border: 1px solid var(--arcade-border);
        border-radius: 16px;
        padding: 1.75rem;
        position: relative;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        animation: fadeInUp 0.6s ease-out backwards;
    }
    
    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .stat-card:nth-child(1) { animation-delay: 0.1s; }
    .stat-card:nth-child(2) { animation-delay: 0.2s; }
    .stat-card:nth-child(3) { animation-delay: 0.3s; }
    .stat-card:nth-child(4) { animation-delay: 0.4s; }
    
    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--arcade-primary), var(--arcade-secondary));
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
    }
    
    .stat-card:hover::before {
        transform: scaleX(1);
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 40px rgba(0, 212, 255, 0.15);
        border-color: var(--arcade-primary);
    }
    
    .stat-card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1rem;
    }
    
    .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
        transition: transform 0.3s ease;
    }
    
    .stat-card:hover .stat-icon {
        transform: scale(1.1) rotate(5deg);
    }
    
    .stat-icon.revenue {
        background: linear-gradient(135deg, rgba(0, 212, 255, 0.15), rgba(139, 0, 255, 0.15));
        color: var(--arcade-primary);
    }
    
    .stat-icon.orders {
        background: linear-gradient(135deg, rgba(139, 0, 255, 0.15), rgba(255, 0, 132, 0.15));
        color: var(--arcade-secondary);
    }
    
    .stat-icon.products {
        background: linear-gradient(135deg, rgba(255, 0, 132, 0.15), rgba(255, 165, 0, 0.15));
        color: #ff0084;
    }
    
    .stat-icon.customers {
        background: linear-gradient(135deg, rgba(255, 165, 0, 0.15), rgba(0, 212, 255, 0.15));
        color: #ffa500;
    }
    
    .stat-info small {
        color: var(--arcade-text-muted);
        font-size: 0.875rem;
        display: block;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--arcade-primary);
        background: linear-gradient(135deg, var(--arcade-primary), var(--arcade-secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1;
        margin-bottom: 0.75rem;
    }
    
    /* Fallback for browsers that don't support background-clip */
    @@supports not (background-clip: text) {
        .stat-value {
            color: var(--arcade-primary);
        }
    }
    
    .stat-trend {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
    }
    
    .stat-trend.positive {
        color: #00ff88;
    }
    
    .stat-trend.negative {
        color: #ff4444;
    }
    
    .stat-trend i {
        font-size: 0.75rem;
    }
    .stat-card {
        background: var(--arcade-bg-card);
        border: 1px solid var(--arcade-border);
        border-radius: 16px;
        padding: 1.5rem;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
        height: 100%;
    }
    
    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    
    .stat-card.revenue::before { background: linear-gradient(90deg, var(--arcade-primary), var(--arcade-accent)); }
    .stat-card.orders::before { background: linear-gradient(90deg, var(--arcade-success), #00cc6a); }
    .stat-card.products::before { background: linear-gradient(90deg, #ff6b35, #ffa726); }
    .stat-card.customers::before { background: linear-gradient(90deg, #e040fb, #7c4dff); }
    
    .stat-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1rem;
    }
    
    .stat-icon-box {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
    }
    
    .stat-card.revenue .stat-icon-box { background: rgba(0, 212, 255, 0.15); color: var(--arcade-primary); }
    .stat-card.orders .stat-icon-box { background: rgba(0, 255, 136, 0.15); color: var(--arcade-success); }
    .stat-card.products .stat-icon-box { background: rgba(255, 107, 53, 0.15); color: #ff6b35; }
    .stat-card.customers .stat-icon-box { background: rgba(224, 64, 251, 0.15); color: #e040fb; }
    
    .stat-trend {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.85rem;
        padding: 0.25rem 0.5rem;
        border-radius: 8px;
    }
    
    .stat-trend.up { background: rgba(0, 255, 136, 0.15); color: var(--arcade-success); }
    .stat-trend.down { background: rgba(255, 68, 68, 0.15); color: #ff4444; }
    
    .stat-value {
        font-size: 2rem;
        font-weight: 800;
        margin-bottom: 0.25rem;
        line-height: 1.2;
        color: var(--arcade-primary);
        background: linear-gradient(135deg, var(--arcade-primary), var(--arcade-secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    /* Light mode stat-value fallback for better visibility */
    [data-theme="light"] .stat-value {
        background: linear-gradient(135deg, #7c3aed, #6366f1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .stat-label {
        color: var(--arcade-text-muted);
        font-size: 0.9rem;
    }
    
    .stat-footer {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid var(--arcade-border);
        font-size: 0.85rem;
        color: var(--arcade-text-muted);
    }
    
    .stat-footer a {
        color: var(--arcade-primary);
        text-decoration: none;
    }
    
    /* Quick Actions */
    .quick-actions-card {
        background: var(--arcade-bg-card);
        border: 1px solid var(--arcade-border);
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }
    
    .quick-actions-title {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--arcade-text, #f1f5f9);
    }
    
    .quick-actions-title i {
        color: var(--arcade-primary);
    }
    
    .quick-actions-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
    }
    
    .quick-action-btn {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        background: var(--arcade-bg);
        border: 1px solid var(--arcade-border);
        border-radius: 10px;
        text-decoration: none;
        color: var(--arcade-text);
        transition: all 0.3s ease;
    }
    
    .quick-action-btn:hover {
        border-color: var(--arcade-primary);
        background: rgba(0, 212, 255, 0.05);
        color: var(--arcade-primary);
        transform: translateX(5px);
    }
    
    .quick-action-btn i {
        font-size: 1.1rem;
        width: 20px;
        text-align: center;
    }
    
    /* Enhanced Table */
    .orders-card {
        background: var(--arcade-bg-card);
        border: 1px solid var(--arcade-border);
        border-radius: 16px;
        overflow: hidden;
    }
    
    .orders-header {
        padding: 1.25rem 1.5rem;
        border-bottom: 1px solid var(--arcade-border);
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: linear-gradient(135deg, rgba(0, 212, 255, 0.03) 0%, rgba(139, 0, 255, 0.03) 100%);
    }
    
    .orders-title {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 1.1rem;
        font-weight: 600;
        margin: 0;
        color: var(--arcade-text, #f1f5f9);
    }
    
    .orders-title i {
        color: var(--arcade-primary);
    }
    
    .orders-table-container {
        overflow-x: auto;
    }
    
    .orders-table {
        width: 100%;
        border-collapse: collapse;
    }
    
    .orders-table th {
        padding: 1rem 1.25rem;
        text-align: left;
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--arcade-text-muted);
        border-bottom: 1px solid var(--arcade-border);
        background: var(--arcade-bg-card);
    }
    
    .orders-table td {
        padding: 1rem 1.25rem;
        border-bottom: 1px solid var(--arcade-border);
        color: var(--arcade-text, #f1f5f9);
    }
    
    .orders-table tbody tr {
        transition: all 0.3s ease;
        animation: slideIn 0.5s ease-out backwards;
    }
    
    @@keyframes slideIn {
        from {
            opacity: 0;
            transform: translateX(-20px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
    
    .orders-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
    .orders-table tbody tr:nth-child(2) { animation-delay: 0.2s; }
    .orders-table tbody tr:nth-child(3) { animation-delay: 0.3s; }
    .orders-table tbody tr:nth-child(4) { animation-delay: 0.4s; }
    .orders-table tbody tr:nth-child(5) { animation-delay: 0.5s; }
    
    .orders-table tr:hover td {
        background: linear-gradient(90deg, rgba(0, 212, 255, 0.05), rgba(139, 0, 255, 0.05));
        transform: scale(1.01);
        box-shadow: 0 2px 8px rgba(0, 212, 255, 0.1);
    }
    
    .orders-table tr:last-child td {
        border-bottom: none;
    }
    
    .order-id {
        font-family: 'Courier New', monospace;
        font-weight: 600;
        color: var(--arcade-primary);
    }
    
    .customer-cell {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    
    .customer-avatar {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--arcade-primary), var(--arcade-accent));
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.8rem;
        color: #000;
    }
    
    .amount {
        font-weight: 700;
        color: var(--arcade-text);
    }
    
    .action-btn {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        border: 1px solid var(--arcade-border);
        background: var(--arcade-bg);
        color: var(--arcade-text);
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    
    .action-btn:hover {
        border-color: var(--arcade-primary);
        color: var(--arcade-primary);
    }
    
    /* Pulse Animation for Stats */
    @@keyframes pulse {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.7;
        }
    }
    
    .stat-value.loading {
        animation: pulse 2s ease-in-out infinite;
    }
    
    /* Smooth Scrollbar */
    .orders-table-container::-webkit-scrollbar {
        height: 8px;
    }
    
    .orders-table-container::-webkit-scrollbar-track {
        background: var(--arcade-bg);
        border-radius: 4px;
    }
    
    .orders-table-container::-webkit-scrollbar-thumb {
        background: linear-gradient(90deg, var(--arcade-primary), var(--arcade-secondary));
        border-radius: 4px;
    }
    
    .orders-table-container::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(90deg, var(--arcade-secondary), var(--arcade-accent));
    }
    
    /* Status Charts */
    .status-chart-card {
        background: var(--arcade-bg-card);
        border: 1px solid var(--arcade-border);
        border-radius: 16px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }
    
    .status-chart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    
    .status-chart-title {
        font-size: 1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin: 0;
        color: var(--arcade-text, #f1f5f9);
    }
    
    .status-chart-title i {
        color: var(--arcade-primary);
    }
    
    .donut-chart {
        width: 160px;
        height: 160px;
        margin: 0 auto 1.5rem;
        position: relative;
    }
    
    .donut-center {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
    }
    
    .donut-center-value {
        font-size: 1.75rem;
        font-weight: 800;
        line-height: 1;
        color: var(--arcade-text, #f1f5f9);
    }
    
    .donut-center-label {
        font-size: 0.75rem;
        color: var(--arcade-text-muted);
    }
    
    .status-legend {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .status-legend-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: var(--arcade-text, #f1f5f9);
    }
    
    .status-legend-count {
        font-weight: 600;
        color: var(--arcade-text, #f1f5f9);
    }
    .status-legend-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
    }
    
    .status-dot.pending { background: var(--arcade-warning); }
    .status-dot.processing { background: var(--arcade-info); }
    .status-dot.shipped { background: var(--arcade-primary); }
    .status-dot.delivered { background: var(--arcade-success); }
    
    .status-legend-count {
        font-weight: 600;
    }
    
    /* Low Stock Card */
    .low-stock-card {
        background: var(--arcade-bg-card);
        border: 1px solid var(--arcade-border);
        border-radius: 16px;
        overflow: hidden;
    }
    
    .low-stock-header {
        padding: 1rem 1.25rem;
        border-bottom: 1px solid var(--arcade-border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: linear-gradient(135deg, rgba(255, 193, 7, 0.1) 0%, rgba(255, 107, 53, 0.1) 100%);
    }
    
    .low-stock-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        margin: 0;
    }
    
    .low-stock-title i {
        color: var(--arcade-warning);
    }
    
    .low-stock-count {
        background: var(--arcade-warning);
        color: #000;
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
    }
    
    .low-stock-body {
        padding: 1rem 1.25rem;
        max-height: 300px;
        overflow-y: auto;
    }
    
    .low-stock-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75rem 0;
        border-bottom: 1px solid var(--arcade-border);
    }
    
    .low-stock-item:last-child {
        border-bottom: none;
    }
    
    .low-stock-info {
        flex: 1;
    }
    
    .low-stock-name {
        font-weight: 500;
        display: block;
        margin-bottom: 0.25rem;
        color: var(--arcade-text, #f1f5f9);
    }
    
    .low-stock-title {
        color: var(--arcade-text, #f1f5f9);
    }
    
    .low-stock-qty {
        font-size: 0.85rem;
        color: var(--arcade-warning);
    }
    
    .low-stock-qty.out {
        color: var(--arcade-danger);
    }
    
    .stock-progress {
        width: 80px;
        height: 6px;
        background: var(--arcade-border);
        border-radius: 3px;
        overflow: hidden;
        margin-right: 1rem;
    }
    
    .stock-progress-bar {
        height: 100%;
        border-radius: 3px;
        transition: width 0.3s ease;
    }
    
    .stock-progress-bar.critical {
        background: var(--arcade-danger);
    }
    
    .stock-progress-bar.low {
        background: var(--arcade-warning);
    }
    
    .low-stock-footer {
        padding: 1rem 1.25rem;
        border-top: 1px solid var(--arcade-border);
    }
    
    /* Recent Activity */
    .activity-card {
        background: var(--arcade-bg-card);
        border: 1px solid var(--arcade-border);
        border-radius: 16px;
        padding: 1.5rem;
    }
    
    .activity-title {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--arcade-text, #f1f5f9);
    }
    
    .activity-title i {
        color: var(--arcade-primary);
    }
    
    .activity-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    
    .activity-item {
        display: flex;
        gap: 1rem;
        position: relative;
        padding-left: 1.5rem;
    }
    
    .activity-item::before {
        content: '';
        position: absolute;
        left: 5px;
        top: 25px;
        bottom: -1rem;
        width: 2px;
        background: var(--arcade-border);
    }
    
    .activity-item:last-child::before {
        display: none;
    }
    
    .activity-icon {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        background: var(--arcade-bg);
        border: 2px solid var(--arcade-border);
        display: flex;
        align-items: center;
        justify-content: center;
        position: absolute;
        left: -12px;
        z-index: 1;
    }
    
    .activity-icon.order { border-color: var(--arcade-primary); color: var(--arcade-primary); }
    .activity-icon.product { border-color: var(--arcade-success); color: var(--arcade-success); }
    .activity-icon.user { border-color: var(--arcade-warning); color: var(--arcade-warning); }
    
    .activity-content {
        flex: 1;
        margin-left: 1.5rem;
    }
    
    .activity-text {
        margin-bottom: 0.25rem;
        color: var(--arcade-text, #f1f5f9);
    }
    
    .activity-time {
        font-size: 0.8rem;
        color: var(--arcade-text-muted);
    }
    
    @@media (max-width: 768px) {
        .quick-actions-grid {
            grid-template-columns: 1fr;
        }
        
        .stat-value {
            font-size: 1.5rem;
        }
    }
</style>

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show mb-4" role="alert" style="border-left: 4px solid #ff4444; background: linear-gradient(135deg, rgba(255, 68, 68, 0.1), rgba(255, 68, 68, 0.05)); border-radius: 12px;">
        <div class="d-flex align-items-center">
            <i class="fas fa-exclamation-circle me-3" style="font-size: 1.5rem; color: #ff4444;"></i>
            <div>
                <strong>Error!</strong> @TempData["ErrorMessage"]
            </div>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (Model.TotalProducts == 0 && Model.TotalOrders == 0)
{
    <div class="alert alert-info mb-4" style="border-left: 4px solid var(--arcade-primary); background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(139, 0, 255, 0.1)); border-radius: 12px; border: 1px solid var(--arcade-border);">
        <div class="d-flex align-items-start">
            <i class="fas fa-rocket me-3 mt-1" style="font-size: 1.5rem; color: var(--arcade-primary);"></i>
            <div>
                <h5 class="mb-2" style="color: var(--arcade-primary);">ðŸŽ® Welcome to Your Arcade Store!</h5>
                <p class="mb-2">Your store is ready to go! Here's how to get started:</p>
                <ol class="mb-0 ps-3">
                    <li><strong>Add Products:</strong> Click "Add New Product" below to start building your inventory</li>
                    <li><strong>Set Stock Levels:</strong> Keep track of your inventory in the Products section</li>
                    <li><strong>Track Orders:</strong> Once customers start shopping, you'll see orders here</li>
                    <li><strong>Monitor Stats:</strong> Watch your revenue and customer growth in real-time</li>
                </ol>
            </div>
        </div>
    </div>
}

<!-- Welcome Section -->
<div class="dashboard-welcome">
    <div class="welcome-text">
        <h2>Welcome back, Admin! ðŸ‘‹</h2>
        <p>Here's what's happening with your store today.</p>
    </div>
    <div class="welcome-date">
        <i class="fas fa-calendar-alt"></i>
        <span>@DateTime.Now.ToString("dddd, MMMM dd, yyyy")</span>
    </div>
</div>

<!-- Stats Cards -->
<div class="row g-4 mb-4">
    <div class="col-sm-6 col-xl-3">
        <div class="stat-card revenue">
            <div class="stat-header">
                <div class="stat-icon-box">
                    <i class="fas fa-coins"></i>
                </div>
                <div class="stat-trend up">
                    <i class="fas fa-arrow-up"></i> 12.5%
                </div>
            </div>
            <div class="stat-value">@Model.TotalRevenue.ToString("N0") EGP</div>
            <div class="stat-label">Total Revenue</div>
            <div class="stat-footer">
                <a asp-action="Orders">View all orders â†’</a>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-xl-3">
        <div class="stat-card orders">
            <div class="stat-header">
                <div class="stat-icon-box">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="stat-trend up">
                    <i class="fas fa-arrow-up"></i> 8.2%
                </div>
            </div>
            <div class="stat-value">@Model.TotalOrders</div>
            <div class="stat-label">Total Orders</div>
            <div class="stat-footer">
                <span class="text-warning">@Model.PendingOrders pending</span> orders
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-xl-3">
        <div class="stat-card products">
            <div class="stat-header">
                <div class="stat-icon-box">
                    <i class="fas fa-box"></i>
                </div>
            </div>
            <div class="stat-value">@Model.TotalProducts</div>
            <div class="stat-label">Products</div>
            <div class="stat-footer">
                <a asp-action="Products">Manage products â†’</a>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-xl-3">
        <div class="stat-card customers">
            <div class="stat-header">
                <div class="stat-icon-box">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-trend up">
                    <i class="fas fa-arrow-up"></i> 5.1%
                </div>
            </div>
            <div class="stat-value">@Model.TotalCustomers</div>
            <div class="stat-label">Customers</div>
            <div class="stat-footer">
                Active this month
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="row mb-4">
    <div class="col-12">
        <div class="quick-actions-card">
            <div class="quick-actions-title">
                <i class="fas fa-bolt"></i> Quick Actions
            </div>
            <div class="quick-actions-grid">
                <a asp-action="CreateProduct" class="quick-action-btn">
                    <i class="fas fa-plus"></i>
                    <span>Add New Product</span>
                </a>
                <a asp-action="Orders" class="quick-action-btn">
                    <i class="fas fa-list"></i>
                    <span>View All Orders</span>
                </a>
                <a asp-action="Inventory" class="quick-action-btn">
                    <i class="fas fa-warehouse"></i>
                    <span>Manage Inventory</span>
                </a>
                <a asp-action="Products" class="quick-action-btn">
                    <i class="fas fa-tags"></i>
                    <span>Products List</span>
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row g-4">
    <!-- Recent Orders -->
    <div class="col-lg-8">
        <div class="orders-card">
            <div class="orders-header">
                <h3 class="orders-title">
                    <i class="fas fa-clock"></i> Recent Orders
                </h3>
                <a asp-action="Orders" class="cyber-btn cyber-btn-ghost cyber-btn-sm">
                    View All <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            <div class="orders-table-container">
                <table class="orders-table">
                    <thead>
                        <tr>
                            <th>Order #</th>
                            <th>Customer</th>
                            <th>Date</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.RecentOrders != null && Model.RecentOrders.Any())
                        {
                            @foreach (var order in Model.RecentOrders)
                            {
                                <tr>
                                    <td>
                                        <span class="order-id">#@order.OrderNumber</span>
                                    </td>
                                    <td>
                                        <div class="customer-cell">
                                            <div class="customer-avatar">
                                                @(order.CustomerName?.Length > 0 ? order.CustomerName[0].ToString().ToUpper() : "?")
                                            </div>
                                            <span>@order.CustomerName</span>
                                        </div>
                                    </td>
                                    <td>@order.OrderDate.ToString("MMM dd, yyyy")</td>
                                    <td>
                                        <span class="amount">@order.Total.ToString("N0") EGP</span>
                                    </td>
                                    <td>
                                        <span class="cyber-badge @GetStatusBadgeClass(order.Status)">
                                            @order.Status
                                        </span>
                                    </td>
                                    <td>
                                        <a asp-action="OrderDetails" asp-route-id="@order.OrderId" class="action-btn" title="View Details">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                    </td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="6" class="text-center py-4">
                                    <i class="fas fa-inbox fa-2x mb-2 text-muted"></i>
                                    <p class="mb-0 text-muted">No orders yet</p>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Right Sidebar -->
    <div class="col-lg-4">
        <!-- Order Status Chart -->
        <div class="status-chart-card">
            <div class="status-chart-header">
                <h3 class="status-chart-title">
                    <i class="fas fa-chart-pie"></i> Order Status
                </h3>
            </div>
            
            <!-- Simple Donut Chart with CSS -->
            <div class="donut-chart">
                <svg viewBox="0 0 100 100" style="transform: rotate(-90deg);">
                    <!-- Background circle -->
                    <circle cx="50" cy="50" r="40" fill="none" stroke="var(--arcade-border)" stroke-width="15"/>
                    <!-- Pending -->
                    <circle cx="50" cy="50" r="40" fill="none" stroke="var(--arcade-warning)" stroke-width="15"
                            stroke-dasharray="@(pendingOrdersPercent * 2.51) 251.2"
                            stroke-dashoffset="0"/>
                    <!-- Processing -->
                    <circle cx="50" cy="50" r="40" fill="none" stroke="var(--arcade-info)" stroke-width="15"
                            stroke-dasharray="@(processingOrdersPercent * 2.51) 251.2"
                            stroke-dashoffset="-@(pendingOrdersPercent * 2.51)"/>
                    <!-- Shipped -->
                    <circle cx="50" cy="50" r="40" fill="none" stroke="var(--arcade-primary)" stroke-width="15"
                            stroke-dasharray="@(shippedOrdersPercent * 2.51) 251.2"
                            stroke-dashoffset="-@((pendingOrdersPercent + processingOrdersPercent) * 2.51)"/>
                    <!-- Delivered -->
                    <circle cx="50" cy="50" r="40" fill="none" stroke="var(--arcade-success)" stroke-width="15"
                            stroke-dasharray="@(deliveredOrdersPercent * 2.51) 251.2"
                            stroke-dashoffset="-@((pendingOrdersPercent + processingOrdersPercent + shippedOrdersPercent) * 2.51)"/>
                </svg>
                <div class="donut-center">
                    <div class="donut-center-value">@Model.TotalOrders</div>
                    <div class="donut-center-label">Total</div>
                </div>
            </div>
            
            <div class="status-legend">
                <div class="status-legend-item">
                    <div class="status-legend-label">
                        <span class="status-dot pending"></span>
                        <span>Pending</span>
                    </div>
                    <span class="status-legend-count">@Model.PendingOrders</span>
                </div>
                <div class="status-legend-item">
                    <div class="status-legend-label">
                        <span class="status-dot processing"></span>
                        <span>Processing</span>
                    </div>
                    <span class="status-legend-count">@Model.ProcessingOrders</span>
                </div>
                <div class="status-legend-item">
                    <div class="status-legend-label">
                        <span class="status-dot shipped"></span>
                        <span>Shipped</span>
                    </div>
                    <span class="status-legend-count">@Model.ShippedOrders</span>
                </div>
                <div class="status-legend-item">
                    <div class="status-legend-label">
                        <span class="status-dot delivered"></span>
                        <span>Delivered</span>
                    </div>
                    <span class="status-legend-count">@Model.DeliveredOrders</span>
                </div>
            </div>
        </div>

        <!-- Low Stock Alert -->
        <div class="low-stock-card">
            <div class="low-stock-header">
                <h3 class="low-stock-title">
                    <i class="fas fa-exclamation-triangle"></i> Low Stock Alert
                </h3>
                @if (Model.LowStockProducts != null && Model.LowStockProducts.Any())
                {
                    <span class="low-stock-count">@Model.LowStockProducts.Count()</span>
                }
            </div>
            <div class="low-stock-body">
                @if (Model.LowStockProducts != null && Model.LowStockProducts.Any())
                {
                    @foreach (var product in Model.LowStockProducts)
                    {
                        var stockPercent = Math.Min(product.StockQuantity * 10, 100);
                        <div class="low-stock-item">
                            <div class="low-stock-info">
                                <span class="low-stock-name">@product.ProductName</span>
                                <span class="low-stock-qty @(product.StockQuantity == 0 ? "out" : "")">
                                    @(product.StockQuantity == 0 ? "Out of stock" : product.StockQuantity + " left")
                                </span>
                            </div>
                            <div class="stock-progress">
                                <div class="stock-progress-bar @(product.StockQuantity == 0 ? "critical" : "low")" 
                                     style="width: @stockPercent%"></div>
                            </div>
                            <a asp-action="EditProduct" asp-route-id="@product.ProductId" class="action-btn" title="Edit">
                                <i class="fas fa-edit"></i>
                            </a>
                        </div>
                    }
                }
                else
                {
                    <div class="text-center py-4">
                        <i class="fas fa-check-circle fa-2x mb-2" style="color: var(--arcade-success);"></i>
                        <p class="mb-0">All products are well stocked!</p>
                    </div>
                }
            </div>
            <div class="low-stock-footer">
                <a asp-action="Inventory" class="cyber-btn cyber-btn-outline cyber-btn-block">
                    <i class="fas fa-warehouse"></i> Manage Inventory
                </a>
            </div>
        </div>
    </div>
</div>

@functions {
    string GetStatusBadgeClass(string status)
    {
        return status switch
        {
            "Pending" => "cyber-badge-warning",
            "Processing" => "cyber-badge-info",
            "Shipped" => "cyber-badge-primary",
            "Delivered" => "cyber-badge-success",
            "Cancelled" => "cyber-badge-danger",
            _ => "cyber-badge-secondary"
        };
    }
}
