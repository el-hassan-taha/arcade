@using Arcade.Models
@{
    ViewData["Title"] = "Home";
    var featuredProducts = ViewBag.FeaturedProducts as IEnumerable<Product> ?? Enumerable.Empty<Product>();
    var categories = ViewBag.Categories as IEnumerable<Category> ?? Enumerable.Empty<Category>();

    var categoryIcons = new Dictionary<string, string>
{
{ "Laptop", "fa-laptop" },
{ "Monitor", "fa-desktop" },
{ "RAM", "fa-memory" },
{ "SSD", "fa-hdd" },
{ "Mouse", "fa-mouse" },
{ "Keyboard", "fa-keyboard" },
{ "CPU", "fa-microchip" },
{ "GPU", "fa-bolt" }
};
}

<!-- Hero Section -->
<section class="cyber-hero">
    <h1 class="cyber-hero-title">
        BUILD YOUR <span class="cyber-text-cyan">DREAM RIG</span>
    </h1>
    <p class="cyber-hero-subtitle">
        Premium computer hardware at the best prices in Egypt. From gaming powerhouses to professional workstations.
    </p>
    <div class="cyber-hero-actions">
        <a asp-controller="Product" asp-action="Index" class="cyber-btn cyber-btn-primary cyber-btn-lg">
            <i class="fas fa-shopping-bag"></i> Shop Now
        </a>
        <a asp-controller="Product" asp-action="Index" asp-route-categoryId="8"
            class="cyber-btn cyber-btn-secondary cyber-btn-lg">
            <i class="fas fa-bolt"></i> Browse GPUs
        </a>
    </div>
    <div class="cyber-hero-stats">
        <div class="cyber-stat">
            <span class="cyber-stat-value" data-count="32">32+</span>
            <span class="cyber-stat-label">Products</span>
        </div>
        <div class="cyber-stat">
            <span class="cyber-stat-value">24/7</span>
            <span class="cyber-stat-label">Support</span>
        </div>
        <div class="cyber-stat">
            <span class="cyber-stat-value">Free</span>
            <span class="cyber-stat-label">Over 2500 EGP</span>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="cyber-mt-4">
    <h2 class="cyber-section-title"><i class="fas fa-th-large cyber-text-cyan"></i> Categories</h2>
    <div class="cyber-product-grid">
        @foreach (var category in categories)
        {
            var iconClass = categoryIcons.ContainsKey(category.CategoryName) ? categoryIcons[category.CategoryName] :
            "fa-box";
            <a asp-controller="Product" asp-action="Index" asp-route-categoryId="@category.CategoryId"
                class="cyber-panel cyber-panel-glow text-decoration-none" style="text-align: center;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">
                    <i class="fas @iconClass cyber-text-cyan"></i>
                </div>
                <h4 style="color: var(--cyber-text-bright); margin-bottom: 0.5rem;">@category.CategoryName</h4>
                <span class="cyber-text-dim">@category.Products.Count() Products</span>
            </a>
        }
    </div>
</section>

<!-- Featured Products Section -->
<section class="cyber-mt-4">
    <h2 class="cyber-section-title"><i class="fas fa-star cyber-text-magenta"></i> Featured Products</h2>
    <div class="cyber-product-grid">
        @foreach (var product in featuredProducts)
        {
            <div class="cyber-product-card">
                <div class="cyber-product-image">
                    @if (!string.IsNullOrEmpty(product.ImageUrl))
                    {
                        <img src="@product.ImageUrl" alt="@product.ProductName" loading="lazy"
                            onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="no-image-placeholder" style="display: none;">
                            <i class="fas fa-image"></i>
                            <span>No Image</span>
                        </div>
                    }
                    else
                    {
                        <div class="no-image-placeholder">
                            <i class="fas fa-image"></i>
                            <span>No Image</span>
                        </div>
                    }
                    <div class="cyber-product-badges">
                        @if (product.IsFeatured)
                        {
                            <span class="cyber-product-badge cyber-badge-new"><i class="fas fa-star"></i> Featured</span>
                        }
                        @if (!product.IsInStock)
                        {
                            <span class="cyber-product-badge cyber-badge-sale">Out of Stock</span>
                        }
                        else if (product.IsLowStock)
                        {
                            <span class="cyber-product-badge cyber-badge-hot"><i class="fas fa-fire"></i> Low Stock</span>
                        }
                    </div>
                    <div class="cyber-product-overlay">
                        <div class="cyber-product-actions">
                            <a asp-controller="Product" asp-action="Details" asp-route-id="@product.ProductId"
                                class="cyber-product-action" title="View Details">
                                <i class="fas fa-eye"></i>
                            </a>
                            @if (product.IsInStock)
                            {
                                <form asp-controller="Cart" asp-action="Add" method="post" class="d-inline">
                                    @Html.AntiForgeryToken()
                                    <input type="hidden" name="productId" value="@product.ProductId" />
                                    <input type="hidden" name="quantity" value="1" />
                                    <button type="submit" class="cyber-product-action" title="Add to Cart">
                                        <i class="fas fa-cart-plus"></i>
                                    </button>
                                </form>
                            }
                        </div>
                    </div>
                </div>
                <div class="cyber-product-body">
                    <span class="cyber-product-category">@product.Category?.CategoryName</span>
                    <h4 class="cyber-product-title">
                        <a asp-controller="Product" asp-action="Details" asp-route-id="@product.ProductId">
                            @product.ProductName
                        </a>
                    </h4>
                    <div class="cyber-product-price">
                        <span class="cyber-price-current">EGP @product.Price.ToString("N0")</span>
                    </div>
                    <div class="cyber-product-stock">
                        @if (product.IsInStock)
                        {
                            <span class="cyber-stock-in"><i class="fas fa-check-circle"></i> In Stock</span>
                        }
                        else
                        {
                            <span class="cyber-stock-out"><i class="fas fa-times-circle"></i> Out of Stock</span>
                        }
                    </div>
                    <div class="cyber-product-footer">
                        <a asp-controller="Product" asp-action="Details" asp-route-id="@product.ProductId"
                            class="cyber-btn cyber-btn-secondary cyber-btn-sm">
                            Details
                        </a>
                        @if (product.IsInStock)
                        {
                            <form asp-controller="Cart" asp-action="Add" method="post" class="d-inline" style="flex:1;">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="productId" value="@product.ProductId" />
                                <input type="hidden" name="quantity" value="1" />
                                <button type="submit" class="cyber-btn cyber-btn-primary cyber-btn-sm" style="width:100%;">
                                    <i class="fas fa-cart-plus"></i> Add
                                </button>
                            </form>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="cyber-text-center cyber-mt-4">
        <a asp-controller="Product" asp-action="Index" class="cyber-btn cyber-btn-secondary cyber-btn-lg">
            <i class="fas fa-th-large"></i> View All Products
        </a>
    </div>
</section>

<!-- Features Section -->
<section class="cyber-mt-4">
    <div class="row g-4">
        <div class="col-md-4">
            <div class="cyber-panel cyber-text-center">
                <div class="cyber-stat-card-icon" style="margin: 0 auto 1rem;">
                    <i class="fas fa-shipping-fast"></i>
                </div>
                <h4>Free Shipping</h4>
                <p class="cyber-text-dim">Free shipping on orders over 2500 EGP across Egypt.</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="cyber-panel cyber-text-center">
                <div class="cyber-stat-card-icon" style="margin: 0 auto 1rem; background: rgba(57, 255, 20, 0.1);">
                    <i class="fas fa-shield-alt" style="color: var(--cyber-green);"></i>
                </div>
                <h4>Secure Payment</h4>
                <p class="cyber-text-dim">256-bit SSL encryption keeps your data safe.</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="cyber-panel cyber-text-center">
                <div class="cyber-stat-card-icon" style="margin: 0 auto 1rem; background: rgba(255, 0, 110, 0.1);">
                    <i class="fas fa-headset" style="color: var(--cyber-magenta);"></i>
                </div>
                <h4>24/7 Support</h4>
                <p class="cyber-text-dim">Our team is always here to help with any questions.</p>
            </div>
        </div>
    </div>
</section>

<!-- Why Choose Us -->
<section class="cyber-mt-4 cyber-mb-4">
    <div class="cyber-panel cyber-panel-glow">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h2 class="cyber-heading" style="font-size: 2rem; margin-bottom: 1rem;">WHY ARCADE?</h2>
                <p class="cyber-text-dim mb-4">We're builders, gamers, and tech enthusiasts just like you.</p>
                <ul style="list-style: none; padding: 0; margin: 0;">
                    <li class="d-flex align-items-center mb-3">
                        <i class="fas fa-check-circle cyber-text-green me-3"></i>
                        <span>Genuine products with manufacturer warranty</span>
                    </li>
                    <li class="d-flex align-items-center mb-3">
                        <i class="fas fa-check-circle cyber-text-green me-3"></i>
                        <span>Competitive prices in Egyptian Pounds</span>
                    </li>
                    <li class="d-flex align-items-center mb-3">
                        <i class="fas fa-check-circle cyber-text-green me-3"></i>
                        <span>Expert advice from real hardware enthusiasts</span>
                    </li>
                    <li class="d-flex align-items-center">
                        <i class="fas fa-check-circle cyber-text-green me-3"></i>
                        <span>Fast shipping across all of Egypt</span>
                    </li>
                </ul>
            </div>
            <div class="col-lg-6">
                <div class="cyber-admin-grid">
                    <div class="cyber-stat-card cyan">
                        <div class="cyber-stat-card-icon"><i class="fas fa-box"></i></div>
                        <div class="cyber-stat-card-value">32+</div>
                        <div class="cyber-stat-card-label">Products</div>
                    </div>
                    <div class="cyber-stat-card magenta">
                        <div class="cyber-stat-card-icon"><i class="fas fa-th-large"></i></div>
                        <div class="cyber-stat-card-value">8</div>
                        <div class="cyber-stat-card-label">Categories</div>
                    </div>
                    <div class="cyber-stat-card green">
                        <div class="cyber-stat-card-icon"><i class="fas fa-certificate"></i></div>
                        <div class="cyber-stat-card-value">100%</div>
                        <div class="cyber-stat-card-label">Genuine</div>
                    </div>
                    <div class="cyber-stat-card purple">
                        <div class="cyber-stat-card-icon"><i class="fas fa-pound-sign"></i></div>
                        <div class="cyber-stat-card-value">EGP</div>
                        <div class="cyber-stat-card-label">Local Prices</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
